var ComboBox=function(a,b){this.container=a,this.container.className+=" cb--container",this.input=a.getElementsByTagName("input")[0],this.input.className+=" cb--input",this.select=a.getElementsByTagName("select")[0],this.select.className+=" cb--select";var c=document.createElement("option");c.innerHTML="---",this.select.insertBefore(c,this.select.options[0]),this.options=this.select.options,this.select.value=this.options[0].innerHTML,this.select.value=[],this.hideSelect(),this.addEventListeners(),this.createVisualHint(),b||this.setStyles()};ComboBox.prototype.addEventListeners=function(){return this.input.addEventListener("focus",this.showSelect.bind(this)),this.input.addEventListener("blur",this.hideSelect.bind(this)),this.input.addEventListener("keyup",this.handleInput.bind(this)),this.select.addEventListener("focus",this.showSelect.bind(this)),this.select.addEventListener("blur",this.hideSelect.bind(this)),this.select.addEventListener("change",this.handleSelection.bind(this)),this.select.addEventListener("keypress",this.handleSelection.bind(this)),this.select.addEventListener("click",this.handleSelection.bind(this)),this},ComboBox.prototype.handleInput=function(a){var b=this.getKey(a);return"ArrowDown"===b?this.select.focus():"Escape"===b?this.hideSelect():this.handleWriting(a.target.value),this},ComboBox.prototype.handleWriting=function(a){var b=this.isTextInOptions(a,this.options);if(b&&""!=a)this.select.value=b;else{var c=""!=a?"--- "+a:"---";this.options[0].innerHTML=c,this.select.value=c,this.select.value=[]}return this},ComboBox.prototype.isTextInOptions=function(a,b){for(var c=1,d=b.length;c<d;c++)if(a.toLowerCase()==b[c].value.substring(0,a.length).toLowerCase())return b[c].innerHTML;return!1},ComboBox.prototype.handleSelection=function(a){var b=this.getKey(a);return"Enter"===b||"Escape"===b?this.select.blur():"---"!=a.target.value.substring(0,3)?this.input.value=a.target.value:this.input.value=a.target.value.substring(4,a.target.value.length),this},ComboBox.prototype.getKey=function(a){return"Enter"===a.key||"Enter"===a.code||13===a.keyCode?"Enter":"Escape"===a.key||"Escape"===a.code||27===a.keyCode?"Escape":"ArrowDown"===a.key||"ArrowDown"===a.code||40===a.keyCode?"ArrowDown":void 0},ComboBox.prototype.hideSelect=function(){return this.select.style.opacity=0,this.select.tabIndex=-1,this},ComboBox.prototype.showSelect=function(){return this.select.style.opacity=1,this.select.tabIndex=0,this},ComboBox.prototype.createVisualHint=function(){this.hint=document.createElement("span"),this.hint.className="cb--hint",this.hint.innerHTML="â–¼",this.container.insertBefore(this.hint,this.input)},ComboBox.prototype.setStyles=function(){this.container.style="display: inline-block;position: relative;",this.input.style="box-sizing: border-box;height: 100%;width: 100%;",this.select.style="border: 1px solid lightgrey;border-top: 0;left: 0;opacity: 0;position: absolute;top: 100%;width: 100%;",this.hint.style="font-size: 8px;pointer-events: none;position: absolute;right: 5px;top: 5px;",this.select.size=4};